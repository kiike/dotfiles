case ${KSH_VERSION:-} in
	*MIRBSD\ KSH*) ;;
	*) return 0 ;;
esac

precmd() {
}

PS1=${|
	\typeset e=$?

	(( e )) && REPLY+="$e|"
	REPLY+=${USER}@${HOSTNAME}:

	\typeset d=${PWD:-?} p=~; [[ $p = ?(*/) ]] || d=${d/#$p/~}
	\typeset m=${%d} n p=...; (( m > 0 )) || m=${#d}
	(( m > (n = (COLUMNS/3 < 7 ? 7 : COLUMNS/3)) )) && d=${d:(-n)} || p=
	REPLY+="$p$d "

	\echo -ne "\033]0;$REPLY\007"
}
